# ~/.config/kitty/kitty.conf
# Minimal, fast, high-quality defaults + sane UX

# ------------------------------------------------------------------------------
# Font
# ------------------------------------------------------------------------------
font_family      JetBrainsMono Nerd Font
bold_font        auto
italic_font      auto
bold_italic_font auto
font_size        13.0
font_features    JetBrainsMonoNL-Regular +ss01 +zero

# Better glyph spacing for Nerd Fonts (usually fine either way)
adjust_line_height  0
adjust_column_width 0

# ------------------------------------------------------------------------------
# Rendering / performance
# ------------------------------------------------------------------------------
enable_ligatures          always
text_composition_strategy platform

# Low-latency rendering while keeping CPU sane
sync_to_monitor           yes
repaint_delay             8
input_delay               1

# Cursor
cursor_shape               beam
cursor_beam_thickness      2.0
cursor_blink_interval      0.8
cursor_stop_blinking_after 15.0

# Scrollback
scrollback_lines                20000
scrollback_pager                less -FRSX
scrollback_pager_history_size   0
scrollback_fill_enlarged_window yes

# ------------------------------------------------------------------------------
# Window / tabs / layout
# ------------------------------------------------------------------------------
dynamic_background_opacity yes
background_opacity         0.96
background_blur            32

window_padding_width       10
placement_strategy         center
active_border_color        #00ff00
inactive_border_color      #444444

confirm_os_window_close    0

tab_bar_edge               top
tab_bar_style              powerline
tab_powerline_style        slanted
tab_bar_margin_height      5 0
tab_title_template         "{index}: {title}"
active_tab_title_template  "{index}: {title}"

# Keep titles useful
allow_remote_control       socket-only
listen_on                  unix:/tmp/kitty-${USER}

# BEGIN_KITTY_THEME
# Adwaita dark
include current-theme.conf
# END_KITTY_THEME

# ------------------------------------------------------------------------------
# Bell / notifications
# ------------------------------------------------------------------------------
enable_audio_bell          no
visual_bell_duration       2.0
bell_on_tab                yes

# ------------------------------------------------------------------------------
# URLs
# ------------------------------------------------------------------------------
detect_urls       yes
url_style         curly
url_color         #0087bd

# ------------------------------------------------------------------------------
# Clipboard / selection
# ------------------------------------------------------------------------------
clipboard_control          write-clipboard write-primary read-clipboard read-primary
copy_on_select             no
strip_trailing_spaces      smart

# ------------------------------------------------------------------------------
# Keybindings (productive, close to multiplexers)
# ------------------------------------------------------------------------------
# Font size adjustment
map ctrl+equal     change_font_size all +2.0
map ctrl+minus     change_font_size all -2.0
map ctrl+0         change_font_size all 0

# Tab navigation
map ctrl+tab       next_tab
map ctrl+shift+tab previous_tab
map ctrl+1         goto_tab 1
map ctrl+2         goto_tab 2
map ctrl+3         goto_tab 3
map ctrl+4         goto_tab 4
map ctrl+5         goto_tab 5
map ctrl+6         goto_tab 6
map ctrl+7         goto_tab 7
map ctrl+8         goto_tab 8
map ctrl+9         goto_tab 9

# New tab in current directory
map ctrl+shift+t   new_tab_with_cwd

# Scrollback search
map ctrl+shift+h   show_scrollback

# Create a new window splitting the space used by the existing one so that
# the two windows are placed one above the other
map f5 launch --location=hsplit

# Create a new window splitting the space used by the existing one so that
# the two windows are placed side by side
map f6 launch --location=vsplit

# Create a new window splitting the space used by the existing one so that
# the two windows are placed side by side if the existing window is wide or
# one above the other if the existing window is tall.
map f4 launch --location=split

# Rotate the current split, changing its split axis from vertical to
# horizontal or vice versa
map f7 layout_action rotate

# Move the active window in the indicated direction
map shift+up move_window up
map shift+left move_window left
map shift+right move_window right
map shift+down move_window down

# Move the active window to the indicated screen edge
map ctrl+shift+up layout_action move_to_screen_edge top
map ctrl+shift+left layout_action move_to_screen_edge left
map ctrl+shift+right layout_action move_to_screen_edge right
map ctrl+shift+down layout_action move_to_screen_edge bottom

# Switch focus to the neighboring window in the indicated direction
map ctrl+left neighboring_window left
map ctrl+right neighboring_window right
map ctrl+up neighboring_window up
map ctrl+down neighboring_window down

# Set the bias of the split containing the currently focused window. The
# currently focused window will take up the specified percent of its parent
# window's size.
map ctrl+. layout_action bias 80

# ------------------------------------------------------------------------------
# Shell / environment
# ------------------------------------------------------------------------------
shell_integration enabled
term xterm-kitty

# ------------------------------------------------------------------------------
# Quality-of-life
# ------------------------------------------------------------------------------
# Middle-click paste can be annoying on laptops; disable if desired:
# mouse_map middle click ungrabbed no-op

# Respect OSC 52 clipboard from remote sessions
allow_hyperlinks yes

